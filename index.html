<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    
    <!-- Resource Hints -->
    <link rel="preconnect" href="https://ik.imagekit.io" crossorigin>
    <link rel="dns-prefetch" href="https://ik.imagekit.io">
    
    <!-- Critical CSS -->
    <style>
      /* Inline critical CSS here */
      .bg-white { background-color: #fff; }
      .min-h-screen { min-height: 100vh; }
    </style>
    
    <!-- Preload Critical Assets -->
    <link rel="preload" as="image" href="https://ik.imagekit.io/appraisily/WebPage/hero_background.jpg?tr=w-1920,h-1080,q-50" fetchpriority="high">
    <link rel="preload" as="image" href="https://ik.imagekit.io/appraisily/WebPage/logo_new.png?tr=w-64,h-64" fetchpriority="high">
    <link rel="modulepreload" href="/src/main.tsx" as="script">
    
    <!-- Deferred Analytics -->
    <script type="module">
      // Defer analytics loading
      const loadAnalytics = () => {
        if (window.analyticsLoaded) return;
        window.analyticsLoaded = true;
        
        const script = document.createElement('script');
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-V8T1NRDNC6';
        script.async = true;
        document.head.appendChild(script);

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-V8T1NRDNC6', {
          send_page_view: false,
          transport_type: 'beacon',
          anonymize_ip: true
        });
      };

      // Load analytics on user interaction or visibility
      const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          loadAnalytics();
          observer.disconnect();
        }
      });

      // Start observing when content is loaded
      document.addEventListener('DOMContentLoaded', () => {
        observer.observe(document.body);
      });

      // Fallback: Load after 3 seconds
      setTimeout(loadAnalytics, 3000);
    </script>

    <!-- Deferred Chat Widget -->
    <script type="module">
      // Load chat widget when user scrolls near footer
      const loadChat = () => {
        const s1 = document.createElement("script");
        s1.async = true;
        s1.src = 'https://embed.tawk.to/63a083dbb0d6371309d528e2/1gklg645r';
        s1.setAttribute('crossorigin','*');
        document.head.appendChild(s1);
      };

      const observer = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
          loadChat();
          observer.disconnect();
        }
      }, { rootMargin: '200px' });

      // Start observing when page loads
      window.addEventListener('load', () => {
        const footer = document.querySelector('footer');
        if (footer) observer.observe(footer);
      });
    </script>

    <link rel="icon" type="image/png" href="https://ik.imagekit.io/appraisily/WebPage/logo_new.png?tr=w-32,h-32" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expert Art Appraisals | Professional Valuation Services</title>
    <meta name="description" content="Professional art and antique appraisal services starting at $59. Get your artwork valued by certified experts within 24-48 hours. IRS & Insurance compliant reports.">
    <meta name="theme-color" content="rgb(37 99 235)">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>